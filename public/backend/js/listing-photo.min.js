"use strict";function location_image_upload(o){var t;o&&(t=gl_photo_id,$.ajax({url:photoDeleteURL,data:{photo_id:t,_token:token},type:"post",dataType:"json",success:function(o){o.success&&$("#photo-div-"+t).remove()},error:function(o,t){}}))}$(document).on("submit","#photo-form",function(o){o.preventDefault(),$("#photo").hide();o=new FormData(this);""!=$("#photo_file").val()&&($.ajax({url:photoUploadURL,data:{form_data:o,_token:token},type:"post",dataType:"json",processData:!1,contentType:!1,success:function(o){var t;o.status?(t='{{ url("images/rooms/$result->id") }}/'+o.photo_name,o='<div class="col-md-4 margin-top10" id="photo-div-'+o.photo_id+'"><div class="room-image-container200" style="background-image:url('+t+');"><a class="photo-delete" href="#" data-rel="'+o.photo_id+'"><p class="photo-delete-icon"><i class="fa fa-trash-o"></i></p></a></div><div class="margin-top5"><textarea data-rel="'+o.photo_id+'" class="form-control f-14 photo-highlights" placeholder="'+highlightsPhotoText+'"></textarea></div></div>',$("#photo-list-div").append(o)):$("#photo").show()},error:function(o,t){show_error_message(networkErrorText)}}),$("#photo_file").val(""),page_loader_stop())}),$(document).on("click",".photo-delete",function(o){o.preventDefault(),gl_photo_id=$(this).attr("data-rel");bootbox.confirm(areYouSureText,location_image_upload)}),$(document).on("focusout",".photo-highlights",function(o){var t=photoMessageURL,e=$(this).attr("data-rel"),a=$(this).val();$.ajax({url:t,data:{photo_id:e,messages:a,_token:token},type:"post",dataType:"json",success:function(o){},error:function(o,t){show_error_message(networkErrorText)}})}),$(document).on("change",".photoId",function(o){var t=makeDefaultPhotoURL,e=$(this).val(),a=$("option:selected",this).attr("image_id"),i=$("option:selected",this).attr("property_id");$.ajax({url:t,data:{photo_id:a,property_id:i,option_value:e,_token:token},type:"post",dataType:"json",success:function(o){location.reload()}})}),$(document).on("change",".serial",function(o){var t=makePhotoSerialURL,e=$(this).val(),a=$(this).attr("image_id");$.ajax({url:t,data:{id:a,serial:e,_token:token},type:"post",dataType:"json",success:function(o){location.reload()}})}),$("#photo_file").on("change",function(){$("#crop-modal").modal("show");var o,e=$("#canvas"),a=e.get(0).getContext("2d"),i=$("#result img"),s=this.files[0].name;this.files&&this.files[0]?this.files[0].type.match(/^image\//)?((o=new FileReader).onload=function(o){var t=new Image;t.onload=function(){a.canvas.height=t.height,a.canvas.width=t.width,a.drawImage(t,0,0);e.cropper({});$(document).on("click","#crop",function(){var o=e.cropper("getCroppedCanvas").toDataURL("image/png");i.attr("src",o),$("#result").toggleClass("hide"),$("#photo").val(o),$("#img_name").val(s),$("#type").val("crop"),e.cropper("destroy"),$("#crop-modal").modal("toggle"),$("#submit").click()}),$(document).on("click","#restore",function(){e.cropper("destroy"),i.empty(),$("#type").val("original"),$("#submit").click()})},t.src=o.target.result},o.readAsDataURL(this.files[0])):alert("Invalid file type! Please select an image file."):alert("No file(s) selected.")});