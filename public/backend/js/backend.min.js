"use strict";function set_calendars(e,t){var a=$("#dtpc_property_id").val(),r=APP_URL+"/admin/ajax-calender/"+a,a=$('input[name="_token"]').val();$.ajax({url:r,data:{_token:a,month:e,year:t},type:"post",dataType:"json",success:function(e){$("#calender-dv").html(e.calendar)},error:function(e,t){}})}$(document).ready(function(){$("#dataTableBuilder").on("click",".edit_meta",function(){var e=this.id,t=APP_URL+"/admin/edit_meta";$.ajax({type:"POST",url:t,data:{id:e,method:"get_meta"},dataType:"JSON",success:function(e){1==e.status_check&&($(".edit_id").val(e.id),$("#input_url").val(e.url),$("#input_title").val(e.title),$("#input_description").val(e.description),$("#input_keywords").val(e.keywords))},error:function(e,t){}})}),"sendmail"==$("#driver").val()&&($(".host").hide(),$(".port").hide(),$(".from_address").hide(),$(".from_name").hide(),$(".encryption").hide(),$(".username").hide(),$(".password").hide(),$(".email_status").hide(),$(".error_email_settings").hide()),$("#driver").on("change",function(){var e=$("#driver").val(),t=$(".email_status_check").val();"sendmail"==e?($(".host").hide(),$(".port").hide(),$(".from_address").hide(),$(".from_name").hide(),$(".encryption").hide(),$(".username").hide(),$(".password").hide(),$(".email_status").hide(),$(".error_email_settings").hide()):"smtp"==e?($(".host").show(),$(".port").show(),$(".from_address").show(),$(".from_name").show(),$(".encryption").show(),$(".username").show(),$(".password").show(),1==t?($(".email_status").show(),$(".error_email_settings").hide()):($(".error_email_settings").show(),$(".email_status").hide())):($(".email_status").hide(),$(".error_email_settings").hide())}),$(".remove_logo_preview").on("click",function(){var e=$("#hidden_company_logo").attr("data-rel"),t=$('input[name="_token"]').val();e&&$.ajax({url:"settings/delete_logo",type:"post",async:!1,data:{company_logo:e,_token:t},dataType:"json",success:function(e){e.success,alert(e.message),location.reload()}})}),$(".remove_favicon_preview").on("click",function(){var e=$("#hidden_company_favicon").attr("data-rel"),t=$('input[name="_token"]').val();e&&$.ajax({url:"settings/delete_favicon",type:"post",async:!1,data:{company_favicon:e,_token:t},dataType:"json",success:function(e){e.success,alert(e.message),location.reload()}})}),$(document.body).on("click",".modal-admin",function(){$("#add_modal").modal()}),$(document).on("click",".edit_bank",function(r){r.preventDefault();$(this).attr("action");$.ajax({url:r.target.dataset.url,type:"get",async:!1,data:[],processData:!1,contentType:!1,dataType:"json",success:function(e,t,a){document.querySelector("#name").value=e.account_name,document.querySelector("#iban").value=e.iban,document.querySelector("#swift").value=e.swift_code,document.querySelector("#bank").value=e.bank_name,document.querySelector("#branch").value=e.branch_name,document.querySelector("#br_city").value=e.branch_city,document.querySelector("#route").value=e.routing_no,document.querySelector("#br_address").value=e.branch_address,document.querySelector("#description").innerHTML=e.description,document.querySelector("#logo").src=e.logo,document.querySelector("#country").value=e.country,document.querySelector("#status").value=e.status,document.querySelector("#edit_form").action=r.target.dataset.edit,$("#edit_modal").modal()},error:function(e,t,a){throw"Bank details not found"}})}),$(document).on("change",".pricing_checkbox",function(){var e;this.checked?(e=$(this).attr("data-rel"),$("#"+e).show()):(e=$(this).attr("data-rel"),$("#"+e).hide(),$("#price-"+e).val(0))}),$(document).on("click","#show_long_term",function(){$("#js-set-long-term-prices").hide(),$("#long-term-div").show()}),$(".editor").wysihtml5(),$("#available").on("click",function(){"box-header d-none"==$("#variable").attr("class")?$("#variable").removeClass("d-none"):$("#variable").addClass("d-none")}),$(document).on("change","#calendar_dropdown",function(){var e=$(this).val(),t=(e=e.split("-"))[0];set_calendars(e[1],t)}),$("#update_meta").on("click",function(){var e=$(".edit_id").val(),t=$("#input_url").val(),a=$("#input_title").val(),r=$("#input_description").val(),n=$("#input_keywords").val(),o=APP_URL+"/admin/edit_meta";$.ajax({type:"POST",url:o,data:{edit_id:e,url:t,title:a,description:r,keywords:n,method:"update_meta"},dataType:"JSON",success:function(e){1==e.status_check?($(".edit_id").val(e.id),$("#input_url").val(e.url),$("#input_title").val(e.title),$("#input_description").val(e.description),$("#input_keywords").val(e.keywords),$("#meta_message").css({display:"block","text-align":"center"}),$("#meta_message").html(e.message)):($("#meta_message").css({display:"none","text-align":"center"}),$(".input_url").html(e.url),$(".input_title").html(e.title),$(".input_description").html(e.description),$(".input_keywords").html(e.keywords))},error:function(e,t){}})})}),$(document.body).on("click",".date-package-modal-admin",function(){var e,t,a,r,n,o=$(this).hasClass("tile-previous");$("#model-message").html(""),o||(e=(r=$(this).attr("id").split("-"))[2],t=r[1],n=r[0],a=$(this).attr("data-price"),o=$(this).attr("data-minday"),r=$(this).attr("data-status"),n=e+"-"+t+"-"+n,$("#dtpc_start_admin").val(n),$("#dtpc_end_admin").val(n),$("#dtpc_price").val(a),$("#dtpc_minstay_admin").val(o),$("#dtpc_status").val(r).change(),$("#dtpc_start_admin").datepicker({format:"dd-mm-yyyy",onSelect:function(e){}}),$("#dtpc_end_admin").datepicker({format:"dd-mm-yyyy",onSelect:function(e){}}),$("#hotel_date_package_admin").modal())}),$(document.body).on("click",".imporpt_calendar",function(){$("#import_calendar_package").modal()}),$(document.body).on("change","#color",function(){"custom"==$("#color").val()?$(".colorCustom").css("display","block"):$(".colorCustom").css("display","none")}),$(document.body).on("submit","#icalendar_form",function(e){e.preventDefault(),$("#error-icalendar-url").html(""),$("#error-icalendar-name").html("");var t=$("#icalendar_url").val(),a=$("#icalendar_name").val(),r=$("#icalendar_property_id").val(),n=$("#color").val(),e=$("#customcolor").val();"custom"==n?""==e&&$("#error-dtpc-customcolor").html("This field is required."):e="none",""==t&&$("#error-icalendar-url").html("This field is required."),""==a&&$("#error-icalendar-name").html("This field is required."),""==n?$("#error-dtpc-color").html("This field is required."):$.ajax({type:"POST",url:APP_URL+"/admin/ajax-icalender-import/"+r,data:{url:t,name:a,property_id:r,color:n,customcolor:e},success:function(e){if(1!=e.status)return $("#error-icalendar-url").html(e.error.url),$("#error-icalendar-name").html(e.error.name),$("#error-dtpc-customcolor").html(e.error.customcolor),!1;$("#icalendar-model-message").html(e.success_message),$("#icalendar-model-message").show()},error:function(e,t){}})}),$(document.body).on("click","#export_icalendar",function(){$("#calendar_export_package").modal()}),$(document.body).on("submit","#dtpc_form",function(e){e.preventDefault(),$("#error-dtpc-start").html(""),$("#error-dtpc-end").html(""),$("#error-dtpc-price").html(""),$("#error-dtpc-minstay").html("");var t=$("#dtpc_start_admin").val(),a=$("#dtpc_end_admin").val(),r=$("#dtpc_price").val(),n=$("#dtpc_status").val(),o=$("#dtpc_minstay_admin").val(),i=$("#dtpc_property_id").val(),e=APP_URL+"/admin/ajax-calender-price/"+i,i=$('input[name="_token"]').val();""==t&&$("#error-dtpc-start").html("Start date not given."),""==a&&$("#error-dtpc-end").html("End date not given."),""==r?$("#error-dtpc-price").html("Price not given."):$.ajax({type:"POST",url:e,data:{_token:i,start_date:t,end_date:a,price:r,min_stay:o,status:n},success:function(e){var t=$("#calendar_dropdown").val(),a=(t=t.split("-"))[0];set_calendars(t[1],a),$("#model-message").html("Data save successfully"),$("#model-message").show(),$("#hotel_date_package_admin").modal("hide")},error:function(e,t){}})}),$(document).on("click",".month-nav-next",function(e){e.preventDefault();e=$(this).attr("data-year");set_calendars($(this).attr("data-month"),e)}),$(document).on("click",".month-nav-previous",function(e){e.preventDefault();e=$(this).attr("data-year");set_calendars($(this).attr("data-month"),e)});