"use strict";$("#edit_customer").validate({rules:{first_name:{required:!0,maxlength:255},last_name:{required:!0,maxlength:255},email:{required:!0,maxlength:255,laxEmail:!0},password:{minlength:6}},submitHandler:function(e){return $("#submitBtn").on("click",function(e){$("#submitBtn").attr("disabled",!0),e.preventDefault()}),!0},errorPlacement:function(e,r){e.insertAfter(r)},messages:{first_name:{required:requiredFieldText,maxlength:maxLengthText},last_name:{required:requiredFieldText,maxlength:maxLengthText},email:{required:requiredFieldText,maxlength:maxLengthText},password:{minlength:minLengthText}}}),$(document).on("blur keyup","#email",function(){var e=$("#email").val(),r=$('input[name="_token"]').val();$(".error-tag").html("").hide(),""!=e?$.ajax({url:checkUserURL,method:"POST",data:{email:e,_token:r},success:function(e){"not_unique"==e?($("#emailError").html('<label class="text-danger">'+emailExistText+"</label>"),$("#email").addClass("has-error"),$("#btn").attr("disabled","disabled")):($("#email").removeClass("has-error"),$("#emailError").html(""),$("#btn").attr("disabled",!1))}}):$("#emailError").html("")}),$.validator.setDefaults({highlight:function(e){$(e).parent("div").addClass("has-error")},unhighlight:function(e){$(e).parent("div").removeClass("has-error")},errorPlacement:function(e,r){$("#tel-error").html("").hide(),e.insertAfter(r)}}),$("#phone").intlTelInput({separateDialCode:!0,nationalMode:!0,preferredCountries:["us"],autoPlaceholder:"polite",placeholderNumberType:"MOBILE",utilsScript:url});var countryData=$("#phone").intlTelInput("getSelectedCountryData");function formattedPhone(){var e;""!=$("#phone").val&&(e=$("#phone").intlTelInput("getNumber").replace(/-|\s/g,""),$("#formatted_phone").val(e))}function enableDisableButton(){hasPhoneError||hasEmailError?$("form").find("button[type='submit']").prop("disabled",!0):$("form").find("button[type='submit']").prop("disabled",!1)}$("#default_country").val(countryData.iso2),$("#carrier_code").val(countryData.dialCode),$("#phone").on("countrychange",function(e,r){formattedPhone(),$("#default_country").val(r.iso2),$("#carrier_code").val(r.dialCode),""!==$.trim($(this).val())?$(this).intlTelInput("isValidNumber")&&isValidPhoneNumber($.trim($(this).val()))?($("#tel-error").html(""),$.ajax({method:"POST",url:duplicate_check_url,dataType:"json",cache:!1,data:{_token:token,phone:$.trim($(this).val()),carrier_code:$.trim(r.dialCode),id:$("#user_id").val()}}).done(function(e){1==e.status?($("#tel-error").html(""),$("#phone-error").show(),$("#phone-error").addClass("error").html(e.fail).css("font-weight","bold"),hasPhoneError=!0,enableDisableButton()):0==e.status&&($("#tel-error").show(),$("#phone-error").html(""),hasPhoneError=!1,enableDisableButton())})):($("#tel-error").addClass("error").html(tel_error).css("font-weight","bold"),hasPhoneError=!0,enableDisableButton(),$("#phone-error").hide()):($("#tel-error").html(""),$("#phone-error").html(""),hasPhoneError=!1,enableDisableButton())}),$(document).ready(function(){$("input[name=phone]").on("blur keyup",function(e){var r,t,a;formattedPhone(),""!==$.trim($(this).val())?$(this).intlTelInput("isValidNumber")&&isValidPhoneNumber($.trim($(this).val()))?(r=$(this).val().replace(/-|\s/g,""),r=$(this).val().replace(/^0+/,""),t=$("#user_id").val(),a=$("#phone").intlTelInput("getSelectedCountryData").dialCode,$.ajax({url:duplicate_check_url,method:"POST",dataType:"json",data:{phone:r,carrier_code:a,_token:token,id:t}}).done(function(e){1==e.status?0==r.length?$("#phone-error").html(""):($("#phone-error").addClass("error").html("The number has already been taken!").css("font-weight","bold"),hasPhoneError=!0,enableDisableButton()):0==e.status&&($("#phone-error").html(""),hasPhoneError=!1,enableDisableButton())}),$("#tel-error").html(""),$("#phone-error").show(),hasPhoneError=!1,enableDisableButton()):($("#tel-error").addClass("error").html("Please enter a valid International Phone Number.").css("font-weight","bold"),hasPhoneError=!0,enableDisableButton(),$("#phone-error").hide()):($("#tel-error").html(""),$("#phone-error").html(""),hasPhoneError=!1,enableDisableButton())})});