"use strict";function ageValidate(){var e=document.getElementById("user_birthday_month").value,r=document.getElementById("user_birthday_day").value,t=document.getElementById("user_birthday_year").value,a=parseInt(t),n=signup_form.birthday_year,l=new Date(a+18,r-1,e),a=new Date;return""==e||""==r||""==t?($("#dobError").html('<label class="text-danger">'+requiredFieldText+"</label>"),n.focus(),!1):a<l?($("#dobError").html('<label class="text-danger">'+oldLimitationText+"</label>"),n.focus(),!1):($("#dobError").html('<span class="text-danger"></span>'),!0)}$("select").on("change",function(){var e=document.getElementById("user_birthday_day").value,r=document.getElementById("user_birthday_month").value,t=document.getElementById("user_birthday_year").value,a=parseInt(t),n=signup_form.birthday_year,l=new Date(a+18,r-1,e),a=new Date;return""==e||""==r||""==t?($("#dobError").html('<label class="text-danger">'+requiredFieldText+"</label>"),n.focus(),!1):a<l?($("#dobError").html('<label class="text-danger">'+oldLimitationText+"</label>"),n.focus(),!1):($("#dobError").html('<span class="text-danger"></span>'),!0)}),$("#signup_form").validate({rules:{first_name:{required:!0,maxlength:255},last_name:{required:!0,maxlength:255},email:{required:!0,maxlength:255,laxEmail:!0},password:{required:!0,minlength:6},birthday_month:{required:!0},birthday_day:{required:!0},birthday_year:{required:!0,minAge:18}},submitHandler:function(e){return $("#btn").on("click",function(e){$("#btn").attr("disabled",!0),e.preventDefault()}),$(".spinner").removeClass("d-none"),$("#btn_next-text").text(signedUpText),!0},errorPlacement:function(e,r){$("#user_birthday_month-error").addClass("d-none"),$("#user_birthday_day-error").addClass("d-none"),e.insertAfter(r),$("#user_birthday_year-error").addClass("d-none")},messages:{first_name:{required:requiredFieldText,maxlength:maxLengthText},last_name:{required:requiredFieldText,maxlength:maxLengthText},email:{required:requiredFieldText,maxlength:maxLengthText},password:{required:requiredFieldText,minlength:minLengthText},birthday_day:{required:requiredFieldText},birthday_month:{required:requiredFieldText},birthday_year:{required:requiredFieldText}}}),jQuery.validator.addMethod("laxEmail",function(e,r){return this.optional(r)||/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)},validEmailText),$(document).on("blur keyup","#email",function(){var e=$("#email").val(),r=$('input[name="_token"]').val();$(".error-tag").html("").hide(),""!=e?$.ajax({url:checkUserURL,method:"POST",data:{email:e,_token:r},success:function(e){"not_unique"==e?($("#emailError").html('<label class="text-danger">'+emailExistText+"</label>"),$("#email").addClass("has-error"),$("#btn").attr("disabled","disabled")):($("#email").removeClass("has-error"),$("#emailError").html(""),$("#btn").attr("disabled",!1))}}):$("#emailError").html("")});var hasPhoneError=!1,hasEmailError=!1;function formattedPhone(){var e;""!=$("#phone").val&&(e=$("#phone").intlTelInput("getNumber").replace(/-|\s/g,""),$("#formatted_phone").val(e))}function enableDisableButton(){hasPhoneError?$("form").find("button[type='submit']").prop("disabled",!0):$("form").find("button[type='submit']").prop("disabled",!1)}$.validator.setDefaults({highlight:function(e){$(e).parent("div").addClass("has-error")},unhighlight:function(e){$(e).parent("div").removeClass("has-error")},errorPlacement:function(e,r){$(".error-tag").html("").hide(),$("#emailError").html("").hide(),e.insertAfter(r)}}),$(document).ready(function(){$("#phone").intlTelInput({separateDialCode:!0,nationalMode:!0,preferredCountries:["us"],autoPlaceholder:"polite",placeholderNumberType:"MOBILE",utilsScript:baseURL+"/public/js/intl-tel-input-13.0.0/build/js/utils.js"});var e=$("#phone").intlTelInput("getSelectedCountryData");$("#default_country").val(e.iso2),$("#carrier_code").val(e.dialCode),$("#phone").on("countrychange",function(e,r){formattedPhone(),$("#default_country").val(r.iso2),$("#carrier_code").val(r.dialCode),""!==$.trim($(this).val())?$(this).intlTelInput("isValidNumber")&&isValidPhoneNumber($.trim($(this).val()))?($("#tel-error").html(""),$.ajax({method:"POST",url:duplicateNumberCheckURL,dataType:"json",cache:!1,data:{_token:token,phone:$.trim($(this).val()),carrier_code:$.trim(r.dialCode)}}).done(function(e){1==e.status?($("#tel-error").html(""),$("#phone-error").show(),$("#phone-error").addClass("error").html(e.fail).css("font-weight","bold"),hasPhoneError=!0,enableDisableButton()):0==e.status&&($("#tel-error").show(),$("#phone-error").html(""),hasPhoneError=!1,enableDisableButton())})):($("#tel-error").addClass("error").html(validInternationalNumber).css("font-weight","bold"),hasPhoneError=!0,$("#phone-error").hide()):($("#tel-error").html(""),$("#phone-error").html(""),hasPhoneError=!1,enableDisableButton())})}),$(document).ready(function(){$("input[name=phone]").on("blur keyup",function(e){var r,t;formattedPhone(),$("#btn").attr("disabled",!1),$("#phone").html("").css("border-color","none"),""!==$.trim($(this).val())?$(this).intlTelInput("isValidNumber")&&isValidPhoneNumber($.trim($(this).val()))?(r=$(this).val().replace(/-|\s/g,""),r=$(this).val().replace(/^0+/,""),t=$("#phone").intlTelInput("getSelectedCountryData").dialCode,$.ajax({url:duplicateNumberCheckURL,method:"POST",dataType:"json",data:{phone:r,carrier_code:t,_token:token}}).done(function(e){1==e.status?0==r.length?$("#phone-error").html(""):($("#phone-error").addClass("error").html(e.fail).css("font-weight","bold"),hasPhoneError=!0,enableDisableButton()):0==e.status&&($("#phone-error").html(""),hasPhoneError=!1,enableDisableButton())}),$("#tel-error").html(""),$("#phone-error").show(),hasPhoneError=!1,enableDisableButton()):($("#tel-error").addClass("error").html(validInternationalNumber).css("font-weight","bold"),hasPhoneError=!0,$("#btn").attr("disabled","disabled"),$("#phone").css("border-color","#a94442"),$("#phone-error").hide()):($("#tel-error").html(""),$("#phone-error").html(""),hasPhoneError=!1,enableDisableButton())})}),$.validator.addMethod("minAge",function(e,r,t){var a=new Date,n=new Date(e),l=a.getFullYear()-n.getFullYear();if(t+1<l)return!0;e=a.getMonth()-n.getMonth();return(e<0||0==e&&a.getDate()<n.getDate())&&l--,t<=l},minAge);