"use strict";var expireTime,autocomplete="";function print_receipt(){document.getElementById("print-div").classList.add("d-none"),document.getElementById("footer").classList.add("d-none"),window.print(),$("#print-div").removeClass("d-none")}$(document).on("submit","#accept_reservation_form",function(){$("#accept_submit").attr("disabled","disabled")}),$("#accept-modal-trigger").on("click",function(){expirationTimeSet(),$("#accept-modal").modal()}),$(document).on("click","#status",function(){var e=$(this).attr("data-id"),t=$(this).attr("data-status"),a=APP_URL+"/listing/update_status";$("#messages").empty(),$.ajax({url:a,data:{_token:token,id:e,status:t},type:"post",dataType:"json",success:function(e){$("#status").attr("data-status",e.status),$("#messages").append(""),$("#alert").removeClass("d-none"),$("#messages").append(e.name+" "+hasBeen+" "+e.prop_status+".");var t=$("#alert");setTimeout(function(){t.addClass("d-none")},4e3)}})}),$(document).on("change","#listing_select",function(){$("#listing-form").trigger("submit")}),$("#decline-modal-trigger").on("click",function(){$("#decline-modal").modal()}),$("#discuss-modal-trigger").on("click",function(){$("#discuss-modal").modal()}),$(document).on("change","#trip_select",function(){$("#my-trip-form").trigger("submit")}),$(document).on("click",".book_mark_change",function(e){e.preventDefault();var t=$(this).data("id"),e=$(this).data("status"),a=APP_URL+"/add-edit-book-mark",n=this;e="1"==e?remove:add,""==user_id?window.location.href=BaseURL+"/unauthentication-favourite/"+t:swal({title:e,icon:"warning",buttons:{cancel:{text:no,value:null,visible:!0,className:"btn btn-outline-danger text-16 font-weight-700  pt-3 pb-3 pl-5 pr-5",closeModal:!0},confirm:{text:yes,value:!0,visible:!0,className:"btn vbtn-outline-success text-16 font-weight-700 pl-5 pr-5 pt-3 pb-3 pl-5 pr-5",closeModal:!0}},dangerMode:!0}).then(e=>{e&&$.ajax({url:a,data:{_token:token,id:t,user_id:user_id},type:"post",dataType:"json",success:function(e){$(n).removeData("status"),"Active"==e.favourite.status?($(n).css("color","forestgreen"),$(n).attr("data-status",1),swal(success,added)):($(n).css("color","black"),$(n).attr("data-status",0),swal(success,removed))}})})}),$("#decline_reason").on("change",function(){"other"==$("#decline_reason").val()&&$("#cancel_reason_other_div").show()}),void 0===expireTime&&(expireTime="");var timer,expirationTimeSet,expiration_time=expireTime,_second=1e3,_minute=60*_second,_hour=60*_minute,_day=24*_hour;function expirationTimeSet(){var e=new Date,t=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()).getTime(),a=new Date(expireTime).getTime()-t;if(a<0)return clearInterval(interval),document.getElementById("countdown_1").innerHTML="Expired!";Math.floor(a/_day),e=Math.floor(a%_day/_hour),t=Math.floor(a%_hour/_minute),a=Math.floor(a%_minute/_second);document.getElementById("countdown_1").innerHTML=e+":",document.getElementById("countdown_1").innerHTML+=t+":",document.getElementById("countdown_1").innerHTML+=a+""}""!=expireTime||(expirationTimeSet="");var interval=setInterval(expirationTimeSet,1e3);function set_calendar(e,t){var a=$("#dtpc_property_id").val(),a=APP_URL+"/ajax-calender/"+a;$.ajax({url:a,data:{_token:$('meta[name="csrf-token"]').attr("content"),month:e,year:t},type:"post",dataType:"json",success:function(e){$("#calender-dv").html(e.calendar),$("#hotel_date_package").modal("hide")},error:function(e,t){}})}function dateConvert(e,t){var a={Jan:1,Feb:2,Mar:3,Apr:4,May:5,Jun:6,Jul:7,Aug:8,Sep:9,Oct:10,Nov:11,Dec:12};let n="",o="",r="",c=t.split(/[./-]/g);var s=e.split(/[./-]/g);return c.forEach((e,t)=>{"dd"===e?n=s[t]:"mm"===e?o=s[t]:"M"===e?o=a[s[t]]:e.includes("yy")&&(r=s[t])}),Date.parse(r+"-"+o+"-"+n)}function mapDropDownActive(){document.getElementById("search-drop-down").classList.toggle("sm-show"),$("#header-search-checkin").datepicker("show")}function page_loader_start(){$("body").prepend('<div id="preloader"></div>')}function page_loader_stop(){$("#preloader").fadeOut("slow",function(){$(this).remove()})}function modal_alert(e,t){$("#alert_model").modal("show")}function myFunction(){var e=document.getElementById("myInput");e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),document.getElementById("copied").innerHTML="Copied"}$(document).on("change","#calendar_dropdown",function(){var e=$(this).val(),t=(e=e.split("-"))[0];set_calendar(e[1],t)}),$(document).on("click",".month-nav-next",function(e){e.preventDefault();e=$(this).attr("data-year");set_calendar($(this).attr("data-month"),e)}),$(document).on("click",".month-nav-previous",function(e){e.preventDefault();e=$(this).attr("data-year");set_calendar($(this).attr("data-month"),e)}),$(document).on("keyup","#header-search-form",function(){autocomplete=new google.maps.places.Autocomplete(document.getElementById("header-search-form")),google.maps.event.addListener(autocomplete,"place_changed",function(){mapDropDownActive()})}),$(document).on("keyup","#sidenav-search-form",function(){autocomplete=new google.maps.places.Autocomplete(document.getElementById("sidenav-search-form")),google.maps.event.addListener(autocomplete,"place_changed",function(){document.getElementById("sidenav-search-drop-down").classList.toggle("sm-show"),$("#sidenav-search-checkin").datepicker("show")})}),$(document).on("keyup","#front-search-field",function(){autocomplete=new google.maps.places.Autocomplete(document.getElementById("front-search-field"))}),$(document).on("keyup","#location-search-google",function(){autocomplete=new google.maps.places.Autocomplete(document.getElementById("location-search-google"))}),$(document.body).on("click",".date-package-modal",function(){$("#model-message").html("");var e=$(this).attr("id").split("-"),t=e[2],a=e[1],n=e[0],o=$(this).attr("data-price"),r=$(this).attr("data-status"),e=$(this).attr("data-minday");t.length<2&&(t="0"+t);var n=t+"-"+a+"-"+n,c=front_date_format_type,n=$.datepicker.formatDate(c,$.datepicker.parseDate("dd-mm-yy",n));$("#dtpc_start").val(n),$("#dtpc_end").val(n),$("#dtpc_price").val(o),$("#dtpc_stay").val(e),$("#dtpc_status").val(r).change(),$("#dtpc_start").datepicker({dateFormat:c,onSelect:function(e){var t=$("#dtpc_start").val(),a=$("#dtpc_end").val();$("#error-dtpc-start").html(""),$("#error-dtpc-end").html(""),dateConvert(t,c)>dateConvert(a,c)&&$("#error-dtpc-start").html("Start date not greater than end date.")}}),$("#dtpc_end").datepicker({dateFormat:c,onSelect:function(e){var t=$("#dtpc_start").val(),a=$("#dtpc_end").val();$("#error-dtpc-start").html(""),$("#error-dtpc-end").html(""),dateConvert(t,c)>dateConvert(a,c)&&$("#error-dtpc-end").html("End date not less than start date.")}}),$("#price_btn").removeClass("disabled"),$("#price_spinner").addClass("d-none"),$("#price_next-text").text(submit),$("#hotel_date_package").modal()}),$(document.body).on("click",".imporpt_calendar",function(){$("#import_calendar_package").modal()}),$(document.body).on("change","#color",function(){"custom"==$("#color").val()?$(".colorCustom").css("display","block"):$(".colorCustom").css("display","none")}),$(document.body).on("submit","#icalendar_form",function(e){e.preventDefault(),$("#error-icalendar-url").html(""),$("#error-icalendar-name").html("");var t=$("#icalendar_url").val(),a=$("#icalendar_name").val(),n=$("#icalendar_property_id").val(),o=$("#color").val(),e=$("#customcolor").val();"custom"==o?""==e&&$("#error-dtpc-customcolor").html("This field is required."):e="none",""==t&&$("#error-icalendar-url").html("This field is required."),""==a&&$("#error-icalendar-name").html("This field is required."),""==o?$("#error-dtpc-color").html("This field is required."):$.ajax({type:"POST",url:APP_URL+"/ajax-icalender-import/"+n,data:{_token:$('meta[name="csrf-token"]').attr("content"),url:t,name:a,property_id:n,color:o,customcolor:e},success:function(e){if(1!=e.status)return $("#error-icalendar-url").html(e.error.url),$("#error-icalendar-name").html(e.error.name),$("#error-dtpc-customcolor").html(e.error.customcolor),!1;$("#icalendar-model-message").html(e.success_message),$("#icalendar-model-message").removeClass("d-none"),$("#import_calendar_package").modal("hide")},error:function(e,t){}})}),$(document.body).on("click","#export_icalendar",function(){$("#calendar_export_package").modal()}),$(document.body).on("submit","#dtpc_form",function(e){e.preventDefault(),$("#error-dtpc-start").html(""),$("#error-dtpc-end").html(""),$("#error-dtpc-price").html(""),$("#error-dtpc-status").html(""),$("#error-dtpc-stay").html("");var t=$("#dtpc_start").val(),a=$("#dtpc_end").val(),n=$("#dtpc_price").val(),o=$("#dtpc_status").val(),r=$("#dtpc_property_id").val(),e=$("#dtpc_stay").val(),r=APP_URL+"/ajax-calender-price/"+r;""==t&&$("#error-dtpc-start").html("Start date not given."),""==a&&$("#error-dtpc-end").html("End date not given."),""==n&&$("#error-dtpc-price").html("Price not given."),""==o&&$("#error-dtpc-status").html("Status not select."),""!=t&&""!=a&&""!=n&&""!=o&&($("#price_btn").addClass("disabled"),$("#price_spinner").removeClass("d-none"),$("#price_next-text").text("Submit.."),$.ajax({type:"POST",url:r,data:{_token:$('meta[name="csrf-token"]').attr("content"),start_date:t,end_date:a,price:n,min_stay:e,status:o},success:function(e){var t=$("#calendar_dropdown").val(),a=(t=t.split("-"))[0];set_calendar(t[1],a),$("#model-message").append("Data save successfully"),$("#model-message").removeClass("d-none")},error:function(e,t){}}))}),$("#open-review").on("click",function(){$(".opening-div").addClass("display-off"),$(".review-div").removeClass("display-off")}),$(".icon-click").on("click",function(){var e=$(this).attr("id"),t=0,a=(e=e.split("-"))[0],n=e[1],o=$("#"+a).val();for($("#"+a).val(n),t=1;t<=o;t++)$("#"+a+"-"+t).removeClass("icon-beach"),$("#"+a+"-"+t).addClass("icon-light-gray");for(t=1;t<=n;t++)$("#"+a+"-"+t).removeClass("icon-light-gray"),$("#"+a+"-"+t).addClass("icon-beach")}),$(".thumb-icon").on("click",function(){$(".thumb-icon").removeClass("icon-select"),$(".thumb-icon").removeClass("icon-unselect");var e=$(this).attr("data-rel");$("#recommend").attr("value",e),0==e?$(this).addClass("icon-unselect"):$(this).addClass("icon-select")}),$("#guest-form").on("submit",function(e){e.preventDefault(),$("#save_button").addClass("disabled"),$(".spinner").removeClass("d-none"),$("#save_button_text").text(submit);var t=$("#booking_id").val(),a=$("#review_id").val(),n=$("#review_message").val(),o=$("#secret_feedback").val(),r=$("#cleanliness").val(),c=$("#rating").val(),s=$("#communication").val(),i=$("#house_rules").val(),e=$("#recommend").val(),t=APP_URL+"/reviews/edit/"+t;$.ajax({url:t,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{review_id:a,message:n,secret_feedback:o,cleanliness:r,rating:c,communication:s,house_rules:i,recommend:e},type:"post",dataType:"json",success:function(e){e.success&&(window.location.href=APP_URL+"/users/reviews_by_you")},error:function(e,t){}})}),window.onclick=function(e){if(!(e.target.matches("#search-map")||e.target.matches(".sm-dropdown-content")||$(e.target).parents(".sm-dropdown-content").length||e.target.matches(".ui-state-default")||e.target.matches(".ui-icon")||e.target.matches(".ui-datepicker-month")||e.target.matches(".ui-datepicker-year")||e.target.matches(".month")))for(var t=document.getElementsByClassName("sm-dropdown-content"),a=0;a<t.length;a++){var n=t[a];n.classList.contains("sm-show")&&n.classList.remove("sm-show")}},$(document).on("submit",".search-form",function(){var t=$("#header-search-checkin").val(),a=$("#header-search-checkout").val(),n=$("#header-search-guests").val(),o=$("#header-search-form").val().replace(" ","+");window.location.href=APP_URL+"/s?location="+o+"&checkin="+t+"&checkout="+a+"&guest="+n,e.preventDefault()}),$("#ok_id").on("click",function(e){e.preventDefault()}),$(document).on("submit","#front-search-form",function(){e.preventDefault();var t=$("#startDate").val(),a=$("#endDate").val(),n=$("#front-search-guests").val(),o=$("#front-search-field").val().replace(" ","+");window.location.href=APP_URL+"/search?location="+o+"&checkin="+t+"&checkout="+a+"&guest="+n,e.preventDefault()}),$(document).on("submit",".search-form",function(e){var t=$("#header-search-checkin").val(),a=$("#header-search-checkout").val(),n=$("#header-search-guests").val(),o=$("#header-search-form").val();""==o&&(t=$("#sidenav-search-checkin").val(),a=$("#sidenav-search-checkout").val(),n=$("#sidenav-search-guests").val(),o=$("#sidenav-search-form").val()),c=o.replace(" ","+"),window.location.href=APP_URL+"/search?location="+c+"&checkin="+t+"&checkout="+a+"&guest="+n,e.preventDefault()}),$(".room-list-status").on("change",function(){var e=$(this).val(),t=$(this).attr("data-room-id");$.ajax({type:"POST",url:APP_URL+"/listing/"+t+"/update_status",data:{_token:"{{ csrf_token() }}",status:e},success:function(){location.reload()}})}),$(document).on("click",".review_detials",function(){var e=$(this).data("id"),t=$(this).data("name");$("#name").html(t);t=APP_URL+"/reviews/details";$.ajax({url:t,data:{_token:token,id:e},type:"post",dataType:"text",success:function(e){$("#heading").html(e)}})}),$(document).on("click",".review_detials",function(){var e=$(this).data("id"),t=$(this).data("name");$("#name").html(t);t=APP_URL+"/reviews/details";$.ajax({url:t,data:{_token:token,id:e},type:"post",dataType:"text",success:function(e){$("#heading").html(e)}})}),$(document).on("submit","#message-form",function(e){e.preventDefault();e=$("#message_text").val();""!=e&&$.ajax({type:"POST",url:APP_URL+"/messaging/qt_reply/"+$("#reservation_id").val(),data:{_token:"{{ csrf_token() }}",message:e},success:function(e){$("#message-list").prepend(e)}})}),$(document).on("submit","#host-message-form",function(e){e.preventDefault();e=$("#message_text").val();""!=e&&$.ajax({type:"POST",url:APP_URL+"/messaging/qt_reply/"+$("#reservation_id").val(),data:{_token:"{{ csrf_token() }}",message:e,pricing_room_id:$("#pricing_room_id").val(),pricing_checkin:$("#pricing_start_date").val(),pricing_checkout:$("#pricing_end_date").val(),pricing_guests:1,pricing_price:$("#pricing_price").val()},success:function(e){$("#message-list").prepend(e)}})}),dateRangeBtn(moment(),moment(),null,dateFormat);