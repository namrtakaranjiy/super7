"use strict";const ls=localStorage.getItem("selected");let selected=!1;var list=document.querySelectorAll(".list"),content=document.querySelector(".content-inbox"),input=document.querySelector(".message-footer input"),open=document.querySelector(".open a");function process(){null!=ls&&(selected=!0,click(list[ls],ls)),selected||click(list[0],0),list.forEach((e,t)=>{e.addEventListener("click",function(){click(e,t)})});try{document.querySelector(".list.active").scrollIntoView(!1)}catch{}}function click(e,t){list.forEach(e=>{e.classList.remove("active")}),e&&(e.classList.add("active"),document.querySelector("sidebar").classList.remove("opened"),open.innerText="UP",document.querySelector(".message-wrap").scrollTop=document.querySelector(".message-wrap").scrollHeight,localStorage.setItem("selected",t))}function sanitize(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return e.replace(/[&<>"'/]/gi,e=>t[e])}process(),open.addEventListener("click",e=>{const t=document.querySelector("sidebar");t.classList.toggle("opened"),"opened"==t.classList.value?e.target.innerText="DOWN":e.target.innerText="UP"}),$(document).on("click",".conversassion",function(){var t=$(this).data("id"),e=APP_URL+"/messaging/booking";$.ajax({url:e,data:{_token:token,id:t},type:"post",dataType:"json",success:function(e){$("#msg-"+t).removeClass("text-success"),$("#messages").empty().html(e.inbox),$("#booking").empty().html(e.booking)}})}),$(".cht_msg").on("keyup",function(e){13===e.which&&$(".chat").trigger("click")}),$(document).on("click",".chat",function(){var e=$(".cht_msg").val(),t=$(this).data("booking"),c=$(this).data("receiver"),s=$(this).data("property"),o='<div class="msg pl-2 pr-2 pb-2 pt-2 mb-2"><p class="m-0">'+sanitize(e)+'</p></div><div class="time">just now</div>',n=APP_URL+"/messaging/reply";$.ajax({url:n,data:{_token:token,msg:e,booking_id:t,receiver_id:c,property_id:s},type:"post",dataType:"json",success:function(e){$(".msg_txt").append(o),$(".cht_msg").val("")}})}),$(".cht_msg").on("keyup",function(e){13===e.which&&$(".chat").trigger("click")});