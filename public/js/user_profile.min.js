"use strict";function ageValidate(){var e=document.getElementById("user_birthday_month").value,r=document.getElementById("user_birthday_day").value,t=document.getElementById("user_birthday_year").value,a=parseInt(t),n=profile_update.birthday_year,l=new Date(a+18,r-1,e),a=new Date;return""==e||""==r||""==t?($("#dobError").html('<label class="text-danger">'+fieldRequire+"</label>"),n.focus(),!1):a<l?($("#dobError").html('<label class="text-danger">'+ageGreater+"</label>"),n.focus(),!1):($("#dobError").html('<span class="text-success"></span>'),!0)}$("select").on("change",function(){var e=document.getElementById("user_birthday_day").value,r=document.getElementById("user_birthday_month").value,t=document.getElementById("user_birthday_year").value,a=parseInt(t),n=profile_update.birthday_year,l=new Date(a+18,r-1,e),a=new Date;return""==e||""==r||""==t?($("#dobError").html('<label class="text-danger">'+fieldRequire+"</label>"),n.focus(),!1):a<l?($("#dobError").html('<label class="text-danger">'+ageGreater+"</label>"),n.focus(),!1):($("#dobError").html('<span class="text-success"></span>'),!0)}),jQuery.validator.addMethod("laxEmail",function(e,r){return this.optional(r)||/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)},email),$(document).ready(function(){$("#profile_update").validate({rules:{first_name:{required:!0,maxlength:255},last_name:{required:!0,maxlength:255},phone:{required:!0,maxlength:255},email:{required:!0,maxlength:255,laxEmail:!0}},submitHandler:function(e){return $("#save_btn").on("click",function(e){$("#save_btn").attr("disabled",!0),e.preventDefault()}),$(".spinner").removeClass("d-none"),$("#save_btn-text").text(saving),!0},messages:{first_name:{required:fieldRequire,maxlength:maxCharacter},last_name:{required:fieldRequire,maxlength:maxCharacter},email:{required:fieldRequire,maxlength:maxCharacter},phone:{required:fieldRequire,maxlength:maxCharacter}}})});var hasPhoneError=!1,hasEmailError=!1;function formattedPhone(){var e;""!=$("#phone").val&&(e=$("#phone").intlTelInput("getNumber").replace(/-|\s/g,""),$("#formatted_phone").val(e))}function enableDisableButton(){hasPhoneError||hasEmailError?$("form").find("button[type='submit']").prop("disabled",!0):$("form").find("button[type='submit']").prop("disabled",!1)}$.validator.setDefaults({highlight:function(e){$(e).parent("div").addClass("has-error")},unhighlight:function(e){$(e).parent("div").removeClass("has-error")},errorPlacement:function(e,r){$("#tel-error").html("").hide(),e.insertAfter(r)}}),$(document).ready(function(){$("#phone").intlTelInput({separateDialCode:!0,nationalMode:!0,preferredCountries:["us"],autoPlaceholder:"polite",placeholderNumberType:"MOBILE",utilsScript:APP_URL+"/public/js/intl-tel-input-13.0.0/build/js/utils.js"});var e=$("#phone").intlTelInput("getSelectedCountryData");$("#default_country").val(e.iso2),$("#carrier_code").val(e.dialCode),$("#phone").on("countrychange",function(e,r){formattedPhone(),$("#default_country").val(r.iso2),$("#carrier_code").val(r.dialCode),""!==$.trim($(this).val())?$(this).intlTelInput("isValidNumber")&&isValidPhoneNumber($.trim($(this).val()))?($("#tel-error").html(""),$.ajax({method:"POST",url:duplicateNumberCheckURL,dataType:"json",cache:!1,data:{_token:token,phone:$.trim($(this).val()),carrier_code:$.trim(r.dialCode),id:$("#user_id").val()}}).done(function(e){1==e.status?($("#tel-error").html(""),$("#phone-error").show(),$("#phone-error").addClass("error").html(e.fail).css("font-weight","bold"),hasPhoneError=!0,enableDisableButton()):0==e.status&&($("#tel-error").show(),$("#phone-error").html(""),hasPhoneError=!1,enableDisableButton())})):($("#tel-error").addClass("error").html(validInternationalNumber).css("font-weight","bold"),hasPhoneError=!0,enableDisableButton(),$("#phone-error").hide()):($("#tel-error").html(""),$("#phone-error").html(""),hasPhoneError=!1,enableDisableButton())})}),$(document).ready(function(){$("input[name=phone]").on("blur keyup",function(e){var r,t,a;formattedPhone(),""!==$.trim($(this).val())?$(this).intlTelInput("isValidNumber")&&isValidPhoneNumber($.trim($(this).val()))?(r=$(this).val().replace(/-|\s/g,""),r=$(this).val().replace(/^0+/,""),t=$("#user_id").val(),a=$("#phone").intlTelInput("getSelectedCountryData").dialCode,$.ajax({url:duplicateNumberCheckURL,method:"POST",dataType:"json",data:{phone:r,carrier_code:a,_token:token,id:t}}).done(function(e){1==e.status?0==r.length?$("#phone-error").html(""):($("#phone-error").addClass("error").html(numberExists).css("font-weight","bold"),hasPhoneError=!0,enableDisableButton()):0==e.status&&($("#phone-error").html(""),hasPhoneError=!1,enableDisableButton())}),$("#tel-error").html(""),$("#phone-error").show(),hasPhoneError=!1,enableDisableButton()):($("#tel-error").addClass("error").html(validInternationalNumber).css("font-weight","bold"),hasPhoneError=!0,enableDisableButton(),$("#phone-error").hide()):($("#tel-error").html(""),$("#phone-error").html(""),hasPhoneError=!1,enableDisableButton())})}),$("#profile-review-count").on("click",function(e){e.preventDefault(),$("html,body").animate({scrollTop:$("#profile-review-title").offset().top},"slow")});